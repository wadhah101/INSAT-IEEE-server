# Migration `20201118094032`

This migration has been generated by Wadhah mahrouk at 11/18/2020, 10:40:32 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."Gender" AS ENUM ('male', 'female')

ALTER TABLE "Member" ADD COLUMN     "gender" "Gender",
ALTER COLUMN "fbLink" DROP NOT NULL,
ALTER COLUMN "phone" DROP NOT NULL,
ALTER COLUMN "email" DROP NOT NULL

ALTER TABLE "Partner" ALTER COLUMN "email" SET NOT NULL

CREATE UNIQUE INDEX "Chapter.name_unique" ON "Chapter"("name")

CREATE UNIQUE INDEX "Chapter.acronym_unique" ON "Chapter"("acronym")

CREATE UNIQUE INDEX "IEEEAccount.email_unique" ON "IEEEAccount"("email")

CREATE UNIQUE INDEX "Member.fbLink_unique" ON "Member"("fbLink")

CREATE UNIQUE INDEX "Member.phone_unique" ON "Member"("phone")

CREATE UNIQUE INDEX "Partner.email_unique" ON "Partner"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201118010456..20201118094032
--- datamodel.dml
+++ datamodel.dml
@@ -1,35 +1,36 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Chapter {
   id      Int      @id @default(autoincrement())
-  name    String
-  acronym String
+  name    String   @unique
+  acronym String   @unique
   members Member[]
 }
 model Member {
   id          Int          @id @default(autoincrement())
   name        String
   lastname    String
-  fbLink      String
-  phone       Int
-  email       String       @unique
+  gender      Gender?
+  fbLink      String?      @unique
+  phone       Int?         @unique
+  email       String?      @unique
+  ieeeAccount IEEEAccount?
   chapters    Chapter[]
-  ieeeAccount IEEEAccount?
   qrScans     QrScan[]
 }
 model IEEEAccount {
   id               Int       @id
-  email            String
+  email            String    @unique
   registrationDate DateTime?
   member           Member    @relation(fields: [memberId], references: [id])
   memberId         Int
 }
@@ -37,9 +38,9 @@
 model Partner {
   id      Int      @id @default(autoincrement())
   name    String
   code    String   @unique
-  email   String?
+  email   String   @unique
   rate    Int?
   qrScans QrScan[]
 }
@@ -50,4 +51,9 @@
   date      DateTime
   memberId  Int
   partnerId Int
 }
+
+enum Gender {
+  male
+  female
+}
```


