# Migration `20201227182920-badge-add`

This migration has been generated by Wadhah Mahrouk at 12/27/2020, 7:29:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "MemberBadge" (
    "id" TEXT NOT NULL,
    "imageDriveId" TEXT,
    "memberId" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "MemberBadge.imageDriveId_unique" ON "MemberBadge"("imageDriveId")

CREATE UNIQUE INDEX "MemberBadge_memberId_unique" ON "MemberBadge"("memberId")

ALTER TABLE "MemberBadge" ADD FOREIGN KEY("memberId")REFERENCES "Member"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201202161759..20201227182920-badge-add
--- datamodel.dml
+++ datamodel.dml
@@ -1,11 +1,11 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
-  provider        = "prisma-client-js"
+  provider = "prisma-client-js"
 }
 model Chapter {
   id      Int      @id @default(autoincrement())
@@ -19,21 +19,30 @@
   fullName     String
   gender       Gender?
   imageDriveId String?      @unique
   imageFile    String?      @unique
-  fbLink       String?      
+  fbLink       String?
   phone        Int?         @unique
   email        String?      @unique
   studyField   String?
   studyLevel   Int?
   ieeeAccount  IEEEAccount?
   chapters     Chapter[]
   qrScans      QrScan[]
+  // badge MemberBadge
+  MemberBadge  MemberBadge?
 }
+model MemberBadge {
+  id           String  @id @default(cuid())
+  imageDriveId String? @unique
+  member       Member  @relation(fields: [memberId], references: [id])
+  memberId     String
+}
+
 model IEEEAccount {
   id             Int       @id
-  email          String?    @unique
+  email          String?   @unique
   expirationDate DateTime?
   member         Member    @relation(fields: [memberId], references: [id])
   memberId       String
 }
```


